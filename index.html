<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sistema para gera√ß√£o de of√≠cios de requisi√ß√£o de imagens - DAS/PCERJ">
    <title>DAS/PCERJ - Requisi√ß√£o de Imagens</title>
    <link rel="stylesheet" href="/das-cameras/css/styles.css">
</head>
<body>
    <!-- Cabe√ßalho -->
    <header class="header">
        <div class="container">
            <h1 class="header-title">DAS/PCERJ ‚Äì Requisi√ß√£o de Imagens</h1>
            <p class="header-subtitle">Delegacia Antissequestro - Pol√≠cia Civil do Estado do Rio de Janeiro</p>
        </div>
    </header>

    <!-- Conte√∫do Principal -->
    <main class="main">
        <div class="container">
            <!-- Alertas e Status -->
            <div id="alerts" class="alerts" aria-live="polite"></div>

            <!-- Formul√°rio Principal -->
            <form id="oficioForm" class="form" novalidate>
                
                <!-- Se√ß√£o 1: Identifica√ß√£o do Procedimento -->
                <section class="form-section">
                    <h2 class="section-title">1. Identifica√ß√£o do Procedimento</h2>
                    
                    <div class="form-group">
                        <label for="dataOficio" class="form-label required">Data do Of√≠cio</label>
                        <input type="date" id="dataOficio" name="dataOficio" class="form-input" required>
                    </div>

                    <div class="form-group">
                        <label for="nProc" class="form-label required">Procedimento (n¬∫/ano)</label>
                        <input type="text" id="nProc" name="nProc" class="form-input" 
                               placeholder="Ex: 907-00059/2025" required>
                    </div>

                    <div class="form-group">
                        <label for="unidade" class="form-label">Unidade</label>
                        <input type="text" id="unidade" name="unidade" class="form-input" 
                               value="DELEGACIA ANTISSEQUESTRO ‚Äì DAS/PCERJ" readonly>
                    </div>
                </section>

                <!-- Se√ß√£o 2: Local da C√¢mera -->
                <section class="form-section">
                    <h2 class="section-title">2. Local da C√¢mera</h2>
                    
                    <div class="geolocation-controls">
                        <button type="button" id="getLocationBtn" class="btn btn-secondary">
                            üìç Obter Localiza√ß√£o Atual
                        </button>
                        <span id="locationStatus" class="location-status"></span>
                    </div>

                    <div class="form-group">
                        <label for="endereco" class="form-label required">Endere√ßo Completo</label>
                        <textarea id="endereco" name="endereco" class="form-textarea" rows="3" 
                                  placeholder="Rua, n√∫mero, bairro, cidade, UF, CEP" required></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="lat" class="form-label">Latitude</label>
                            <input type="text" id="lat" name="lat" class="form-input" 
                                   placeholder="-22.970722" pattern="-?\d+\.\d{6}">
                        </div>
                        <div class="form-group">
                            <label for="lon" class="form-label">Longitude</label>
                            <input type="text" id="lon" name="lon" class="form-input" 
                                   placeholder="-43.186966" pattern="-?\d+\.\d{6}">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="referencia" class="form-label">Ponto de Refer√™ncia</label>
                        <input type="text" id="referencia" name="referencia" class="form-input" 
                               placeholder="Ex: Pr√≥ximo ao shopping, em frente √† escola">
                    </div>
                </section>

                <!-- Se√ß√£o 3: Per√≠odo das Imagens -->
                <section class="form-section">
                    <h2 class="section-title">3. Per√≠odo das Imagens</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="dataInicio" class="form-label required">Data In√≠cio</label>
                            <input type="date" id="dataInicio" name="dataInicio" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="horaInicio" class="form-label required">Hora In√≠cio</label>
                            <input type="time" id="horaInicio" name="horaInicio" class="form-input" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="dataFim" class="form-label required">Data T√©rmino</label>
                            <input type="date" id="dataFim" name="dataFim" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="horaFim" class="form-label required">Hora T√©rmino</label>
                            <input type="time" id="horaFim" name="horaFim" class="form-input" required>
                        </div>
                    </div>

                    <div id="periodoPreview" class="periodo-preview"></div>
                </section>

                <!-- Se√ß√£o 4: Respons√°vel/Contato -->
                <section class="form-section">
                    <h2 class="section-title">4. Respons√°vel/Contato do Estabelecimento</h2>
                    
                    <div class="form-group">
                        <label for="respNome" class="form-label">Nome do Propriet√°rio/Respons√°vel</label>
                        <input type="text" id="respNome" name="respNome" class="form-input">
                    </div>

                    <div class="form-group">
                        <label for="respTel" class="form-label">Telefone/WhatsApp</label>
                        <input type="tel" id="respTel" name="respTel" class="form-input" 
                               placeholder="(21) 99999-9999">
                    </div>

                    <div class="form-group">
                        <label for="respEmail" class="form-label">E-mail</label>
                        <input type="email" id="respEmail" name="respEmail" class="form-input" 
                               placeholder="contato@exemplo.com">
                    </div>
                </section>

                <!-- Se√ß√£o 5: Prefer√™ncias de Entrega -->
                <section class="form-section">
                    <h2 class="section-title">5. Prefer√™ncias de Recebimento</h2>
                    <p>As imagens devem ser recebidas por:</p>
                    <ul>
                        <li>Link em nuvem com permiss√£o de edi√ß√£o (Google Drive/OneDrive/Dropbox)</li>
                        <li>Envio via WhatsApp: 21 98596-7060</li>
                        <li>Pen drive mediante agendamento</li>
                    </ul>
                </section>

                <!-- Se√ß√£o 6: Anexos -->
                <section class="form-section">
                    <h2 class="section-title">6. Anexos</h2>
                    
                    <div class="photo-controls">
                        <button type="button" id="addPhotoBtn" class="btn btn-secondary">
                            üì∑ Adicionar Fotos da C√¢mera
                        </button>
                        <input type="file" id="photoInput" accept="image/*" capture="environment" 
                               multiple style="display: none;">
                    </div>

                    <div id="photoPreview" class="photo-preview"></div>
                </section>

                <!-- Se√ß√£o 7: Observa√ß√µes -->
                <section class="form-section">
                    <h2 class="section-title">7. Observa√ß√µes</h2>
                    
                    <div class="form-group">
                        <label for="observacoes" class="form-label">Observa√ß√µes Adicionais</label>
                        <textarea id="observacoes" name="observacoes" class="form-textarea" rows="4" 
                                  placeholder="Ex: posi√ß√£o da c√¢mera, acesso ao DVR, nome l√≥gico da c√¢mera, pontos cegos..."></textarea>
                    </div>
                </section>

            </form>

            <!-- Controles de A√ß√£o -->
            <div class="action-controls">
                <button type="button" id="previewBtn" class="btn btn-primary">
                    üëÅÔ∏è Pr√©-visualizar Of√≠cio
                </button>
                
                <button type="button" id="generatePdfBtn" class="btn btn-success" disabled>
                    üìÑ Gerar PDF
                </button>
                
                <button type="button" id="clearBtn" class="btn btn-secondary">
                    üóëÔ∏è Limpar / Novo
                </button>
            </div>

            <!-- Controles Avan√ßados -->
            <details class="advanced-controls">
                <summary>Op√ß√µes Avan√ßadas</summary>
                <div class="advanced-buttons">
                    <button type="button" id="exportJsonBtn" class="btn btn-outline">
                        üì§ Exportar JSON
                    </button>
                    <button type="button" id="importJsonBtn" class="btn btn-outline">
                        üì• Importar JSON
                    </button>
                    <input type="file" id="jsonInput" accept=".json" style="display: none;">
                </div>
            </details>

        </div>
    </main>

    <!-- Modal de Pr√©-visualiza√ß√£o -->
    <div id="previewModal" class="modal" role="dialog" aria-labelledby="previewTitle" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="previewTitle">Pr√©-visualiza√ß√£o do Of√≠cio</h3>
                <button type="button" id="closePreviewBtn" class="modal-close" aria-label="Fechar">&times;</button>
            </div>
            <div class="modal-body">
                <div id="previewContent" class="preview-content"></div>
            </div>
            <div class="modal-footer">
                <button type="button" id="editBtn" class="btn btn-secondary">Editar</button>
                <button type="button" id="confirmPdfBtn" class="btn btn-success">Gerar PDF</button>
            </div>
        </div>
    </div>

    <!-- Rodap√© -->
    <footer class="footer">
        <div class="container">
            <div class="privacy-notice">
                <p><strong>Aviso de Privacidade:</strong> Dados coletados exclusivamente para gera√ß√£o do of√≠cio. 
                Nada √© enviado automaticamente a servidores de terceiros.</p>
            </div>
            <div class="footer-info">
                <p>Sistema desenvolvido para a Delegacia Antissequestro - DAS/PCERJ</p>
                <p>Contatos: das.delegaciaantissequestro@gmail.com | (21) 98596-7060</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="/das-cameras/js/validation.js"></script>
    <script src="/das-cameras/js/geolocation.js"></script>
    <script src="/das-cameras/js/camera.js"></script>
    <script src="/das-cameras/js/pdf-generator.js"></script>
    <script src="/das-cameras/js/app.js"></script>
</body>
</html>

